@model SpotifyOpgaveCore.Models.Room

@{
    ViewData["Title"] = "Details";
}
<script type="text/javascript" language="javascript">
    $(document).ready(function () {
        $("#searchBox").on('input', function () {
            $.ajax(
                {
                    url: "@Url.Action("Search", Model)", // Controller/View
                    data: { //Passing data
                        searchString: $("#searchBox").val(), //Reading text box values using Jquery

                },
                success: function (data) {
                    $("#list-result").html(data);
                }
            });
            console.log("yo");

        });
    });
</script>
<h2>Details</h2>

<div>
    <h4>Room</h4>
    <hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.Owner)
        </dt>
        <dd>
            @Html.DisplayFor(model => model.Owner)
        </dd>
        <dt>
            @Html.DisplayNameFor(model => model.Name)
        </dt>
        <dd>
            @Html.DisplayFor(model => model.Name)
        </dd>
    </dl>
</div>
<h2>@Html.DisplayFor(model => model.Owner)'s Queue</h2>
@if(User.Identity.Name == Model.Owner) {
<script>
    setInterval(function GetContext() {
        $.ajax(
            {
                url: "@Url.Action("PlayingContext")", // Controller/View
                success: function (data) {
                    $("#playerContext").html(data);
                }

            });
        console.log("yo");
    }, 2000);
</script>
<div id="playerContext">
    @Html.Partial("playingContext",Model)
</div> }
<div class="input-group input-group-sm mb-3">
    <div class="input-group-prepend">
        <span class="input-group-text" id="inputGroup-sizing-sm">Search</span>
    </div>
    <input type="text" id="searchBox" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm">
</div>
<div id="list-result">
    @Html.Partial("searchResult",Model)
</div>
<table id="Grid" class="table table-striped table-bordered table-hover table-condensed">
    <tbody>
        @if (Model.Songs == null)
        {
            <p>Ingen sange her</p>
        }
        else
        {
            foreach (var item in @Model.Songs)
            {
                <tr>
                    <td></td>
                    <td>
                        <div class="row" id="song" style="justify-content: space-between; padding:16px;">
                            <a id="tab" data-index="@item.SongID" data-index2="@item.RoomId" name="tab" href="#">@item.Name</a>

                            <div>
                                <a class="icon-thumbs-up" href="#" style="color:green;"></a>
                                <a class="icon-thumbs-down" href="#" style="color:red;"></a>
                            </div>
                        </div>
                    </td>
                    <td>
                        Stemmer
                    </td>
                    <td>
                        <a class="btn" href="#" style="color:green;font-size: 30px;">+</a>
                    </td>
                </tr>
            }
        }
    </tbody>
</table>
<div>
    <a asp-action="Edit" asp-route-id="@Model.RoomId">Edit</a> |
    <a asp-action="Index">Back to List</a>
</div>
